<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cbox.business.worktask.worktaskdeal.mapper.WorktaskDealMapper">
 
    <!-- 查询对象 -->
    <sql id="selectVO">
        <![CDATA[
            select 
                t.rec_id,
                t.task_id,
                t.deal_detail,
                t.deal_image,
                t.finish_rate,
                t.rec_status,
                t.rec_person,
                t.rec_time,
                t.rec_updateperson,
                t.rec_updatetime,
                u.nick_name as user_name
            from d_worktask_deal t
            left join sys_user u on t.rec_person=u.user_name
        ]]>
    </sql>
   
    <!-- listWorktaskDeal : 获取任务表列表数据 -->
    <select id="listWorktaskDeal" parameterType="java.util.Map" resultType="java.util.HashMap">
        <include refid="selectVO"/>
 
        where t.rec_status='1'
        <if test="task_id != null and task_id != ''">
             and t.task_id=#{task_id}
        </if>
        order by t.rec_time desc
    </select>
 
    <!-- getWorktaskDeal : 获取指定id的任务表数据 -->
    <select id="getWorktaskDeal" parameterType="java.util.Map" resultType="java.util.HashMap">
        <include refid="selectVO"/>
 
        where t.rec_status='1'
        and t.rec_id=#{rec_id}
    </select>
 
    
</mapper>