<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cbox.business.question.questiontitleoption.mapper.QuestionTitleOptionMapper">

	<!-- 查询对象 -->
	<sql id="selectVO">
		<![CDATA[
			select 
				t.rec_id,
				t.title_id,
				qt.title_name,
				t.option_name,
				t.option_sort,
				t.is_singlerow,
				t.font_size,
				t.is_answer,
				t.rec_status,
				t.rec_person,
				t.rec_time,
				t.rec_updateperson,
				t.rec_updatetime,
				u.nick_name as user_name
			from d_question_title_option t
			left join d_question_title qt on t.title_id=qt.rec_id
			left join sys_user u on t.rec_person=u.user_name
		]]>
	</sql>

	<!-- listQuestionTitleOption : 获取题目选项列表数据 -->
	<select id="listQuestionTitleOption" parameterType="java.util.Map" resultType="java.util.HashMap">
		<include refid="selectVO"/>

		where t.rec_status='1'
		<if test="rec_id != null and rec_id != ''">
			 and t.rec_id=#{rec_id}
		</if>
		<if test="title_id != null and title_id != ''">
			 and t.title_id=#{title_id}
		</if>
		<if test="option_name != null and option_name != ''">
			 and t.option_name like concat('%',#{option_name},'%')
		</if>
		<if test="question_id != null and question_id != ''">
			 and qt.question_id =#{question_id}
		</if>
		order by option_sort asc
	</select>

	<!-- getQuestionTitleOption : 获取指定id的题目选项数据 -->
	<select id="getQuestionTitleOption" parameterType="java.util.Map" resultType="java.util.HashMap">
		<include refid="selectVO"/>

		where t.rec_status='1'
		and t.rec_id=#{rec_id}
	</select>

</mapper>